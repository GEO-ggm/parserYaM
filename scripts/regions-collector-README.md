# –°–±–æ—Ä—â–∏–∫ ID —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏

–ü–∞—Ä—Å–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ ID –∏ –Ω–∞–∑–≤–∞–Ω–∏–π —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏ —Å –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URL**: `https://yandex.ru/maps/{ID}/tver/?ll=35.917421%2C56.858745&z=12`
2. **–ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ ID**: –æ—Ç 1 –¥–æ 150 (–∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω)
3. **–ê–Ω–∞–ª–∏–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ URL –ø–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π**: –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞ –∏–∑ URL

## –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

### ‚úÖ **SUCCESS** - —Ä–µ–≥–∏–æ–Ω –Ω–∞–π–¥–µ–Ω
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –≤ URL –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å `tver` –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ
- –ü—Ä–∏–º–µ—Ä: `/maps/213/tver/` ‚Üí `/maps/213/moscow/`

### ‚ùå **ERROR** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞  
- –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏, —Ç–∞–π–º–∞—É—Ç—ã, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
- **–≠—Ç–∏ –∑–∞–ø–∏—Å–∏ –°–û–•–†–ê–ù–Ø–Æ–¢–°–Ø** –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### ‚ùì **NOT_FOUND** - ID –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞
- **–≠—Ç–∏ –∑–∞–ø–∏—Å–∏ –ù–ï –°–û–•–†–ê–ù–Ø–Æ–¢–°–Ø** –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

## –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞

```bash
# –°–±–æ—Ä –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ (ID 1-150)
npm run collect-regions

# –°–±–æ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
npm run collect-regions 1 50

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ ts-node
npx ts-node scripts/regions-collector.ts 10 30
```

## –†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–µ —Ñ–∞–π–ª—ã

### 1. `results/regions-collection.json`
–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏–æ–Ω–∞—Ö (—Ç–æ–ª—å–∫–æ SUCCESS –∏ ERROR):
```json
{
  "totalProcessed": 150,
  "successCount": 85,
  "errorCount": 5,
  "notFoundCount": 60,
  "savedRegionsCount": 90,
  "regions": [
    {
      "id": 213,
      "name": "moscow", 
      "originalUrl": "https://yandex.ru/maps/213/tver/...",
      "finalUrl": "https://yandex.ru/maps/213/moscow/...",
      "status": "success"
    }
  ],
  "timestamp": "2024-01-15T10:30:00.000Z"
}
```

### 2. `results/regions-simple.json`
–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (—Ç–æ–ª—å–∫–æ SUCCESS):
```json
[
  {
    "id": 213,
    "name": "moscow",
    "url": "https://yandex.ru/maps/213/moscow/..."
  }
]
```

### 3. `results/regions.csv`
CSV —Ñ–∞–π–ª –¥–ª—è Excel (SUCCESS + ERROR):
```
ID,–ù–∞–∑–≤–∞–Ω–∏–µ,–°—Ç–∞—Ç—É—Å,–ò—Å—Ö–æ–¥–Ω—ã–π URL,–§–∏–Ω–∞–ª—å–Ω—ã–π URL,–û—à–∏–±–∫–∞
213,"moscow","success","https://...","https://...",""
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
- ‚úÖ **SUCCESS —Ä–µ–≥–∏–æ–Ω—ã** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚ùå **ERROR —Ä–µ–≥–∏–æ–Ω—ã** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º

### –ß—Ç–æ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
- ‚ùì **NOT_FOUND –∑–∞–ø–∏—Å–∏** - –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
üìä –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 150
‚úÖ –£—Å–ø–µ—à–Ω–æ –Ω–∞–π–¥–µ–Ω–æ: 85  
‚ùå –û—à–∏–±–∫–∏: 5
‚ùì –ù–µ –Ω–∞–π–¥–µ–Ω–æ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ): 60
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ JSON: 90 –∑–∞–ø–∏—Å–µ–π
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í —Ñ–∞–π–ª–µ `scripts/regions-collector.ts`:

```typescript
// –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
private baseUrl = 'https://yandex.ru/maps';
private urlParams = '/?ll=35.917421%2C56.858745&z=12';

// –¢–∞–π–º–∞—É—Ç—ã
timeout: 15000  // 15 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
waitForTimeout(500)  // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –Ω–∞ 20 —Ä–µ–≥–∏–æ–Ω–∞—Ö
npm run collect-regions 1 20

# –°–±–æ—Ä –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
npm run collect-regions 200 250

# –ü–æ–ª–Ω—ã–π —Å–±–æ—Ä
npm run collect-regions
``` 