# Анализатор регионов Яндекс Карт

Этот скрипт автоматически анализирует регионы России на Яндекс Картах и извлекает их названия по ID.

## Как это работает

1. Скрипт проходит по URL вида `https://yandex.ru/maps/{id}`
2. Анализирует редиректы и извлекает название региона из URL
3. Если не получается из URL, пытается извлечь из заголовка страницы
4. Сохраняет результаты в JSON и генерирует TypeScript конфиг

## Установка зависимостей

```bash
npm install
```

## Запуск анализатора

```bash
# Через npm script
npm run analyze-regions

# Или напрямую через ts-node  
npx ts-node scripts/region-analyzer.ts
```

## Результаты

После выполнения анализа будут созданы файлы:

1. `results/regions-analysis.json` - полный отчет с деталями
2. `results/regions-simple.json` - упрощенный список регионов
3. `config/regions.generated.ts` - TypeScript конфиг для использования в коде

## Пример использования сгенерированного конфига

```typescript
import { RUSSIAN_REGIONS, getRegionUrl, findRegionById } from '../config/regions.generated';

// Получить URL региона
const moscowUrl = getRegionUrl('213'); // https://yandex.ru/maps/213

// Найти регион по ID
const region = findRegionById('213');
console.log(region?.name); // Москва

// Перебрать все регионы
RUSSIAN_REGIONS.forEach(region => {
  console.log(`${region.id}: ${region.name}`);
});
```

## Настройка анализа

В файле `scripts/region-analyzer.ts` можно изменить:

- Список ID для анализа (переменная `popularIds`)
- Диапазон ID для массового анализа (метод `analyzeRegionRange`)
- Таймауты и задержки между запросами
- Алгоритмы извлечения названий регионов

## Логика извлечения названий

Скрипт использует несколько стратегий:

1. **Из URL**: Ищет паттерны вида `/maps/213/moscow/` или `/maps/moscow/`
2. **Из заголовка**: Извлекает название из title страницы типа "Москва — Яндекс Карты"

## Примеры найденных паттернов

- `https://yandex.ru/maps/213/` → ID: 213, Name: moscow (из URL)
- `Москва — Яндекс Карты` → Name: Москва (из title)

## Ограничения

- Скрипт делает паузы между запросами чтобы не перегружать Яндекс
- Некоторые ID могут не существовать или редиректить на главную страницу
- Названия извлекаются как есть, без дополнительной обработки 